/**
 * Markdown Sections - Custom Styling for VitePress Containers
 *
 * Provides enhanced styling for markdown sections, particularly
 * plain-text collapsible sections for Wikipedia-style expandable content.
 */

/* ============================================================================
   Plain-Text Collapsible Sections
   ============================================================================ */

/**
 * Wikipedia-style collapsible sections that blend seamlessly with text flow.
 *
 * Usage in markdown:
 *   ::: details plain Section Title
 *   Content here...
 *   :::
 *
 * Features:
 * - No background color or borders
 * - Normal font weight (not bold)
 * - Subtle hover effect
 * - Natural text flow
 */

.custom-block.details.plain {
  border: none;
  background-color: transparent;
  padding: 0;
  margin: 1.5rem 0;
}

.custom-block.details.plain summary {
  font-weight: 400;
  font-size: 1rem;
  color: var(--vp-c-text-1);
  padding: 0.75rem 0;
  margin: 0;
  cursor: pointer;
  user-select: none;
  transition: color 0.2s;
}

.custom-block.details.plain summary:hover {
  color: var(--vp-c-brand-1);
}

/* Remove default padding from content area */
.custom-block.details.plain > :not(summary) {
  /*padding-left: 0;*/
  margin-top: 1rem;
}

/* Ensure nested content flows naturally */
.custom-block.details.plain p {
  margin: 0.5rem 0;
}

.custom-block.details.plain ul,
.custom-block.details.plain ol {
  margin: 0.5rem 0;
}

/* ============================================================================
   Collapse Sections (Custom Container)
   ============================================================================ */

/**
 * Plain-text collapsible sections using custom ::: collapse syntax.
 * Generates clean HTML without custom-block class.
 *
 * Usage in markdown:
 *   ::: collapse Section Title
 *   Content here...
 *   :::
 *
 * Features:
 * - No background color or borders
 * - Normal font weight (not bold)
 * - Arrow indicator (▶ rotates to ▼ when open)
 * - Subtle hover effect
 * - Natural text flow
 */

.collapse-section {
  border: none;
  background-color: transparent;
  padding: 0;
  /*margin: 1.5rem 0;*/
}

.collapse-title {
  font-weight: 400;
  font-size: 1rem;
  color: var(--vp-c-text-1);
  /*padding: 0.75rem 0;*/
  margin: 0;
  cursor: pointer;
  user-select: none;
  transition: color 0.2s;
}

.collapse-title:hover {
  color: var(--vp-c-brand-1);
}

/* Ensure nested content flows naturally */
.collapse-body p {
  margin: 0.5rem 0;
}

.collapse-body ul,
.collapse-body ol {
  margin: 0.5rem 0;
}

/* Selects headings inside a <summary> element within the .collapse-section container */
.collapse-section summary h1,
.collapse-section summary h2,
.collapse-section summary h3,
.collapse-section summary h4,
.collapse-section summary h5,
.collapse-section summary h6 {
  /* CRITICAL CHANGE: Keeps element inline with the marker,
     but allows us to set the width */
  display: inline-block;

  /* Forces the inline-block element to cover the full available width
     within the <summary> element */
  width: 100%;

  /* Still recommended to remove default margins for clean vertical alignment */
  margin: 0;
}

/* ---------------------------------- */
/* --- Collapsible Chapter Styles --- */
/* ---------------------------------- */

/* Base summary styles for the clickable header */
details.chapter summary {
  /* Layout and Interactivity */
  cursor: pointer;
  display: flex;
  align-items: baseline; /* Generally better for vertical centering than baseline */
  user-select: none;
  gap: 0.6em;
  padding-left: 0; /* Remove default padding */
  transition: color 0.2s;
}

/* H2 has a separator */
details.chapter > summary:has(h2) {
  border-top: 0.8px solid rgb(226, 226, 227); /* The continuous horizontal bar */
  margin-top: 48px;
}

/* Heading alignment and reset */
details.chapter summary h2,
details.chapter summary h3 {
  margin: 0;
  display: inline-block;
  line-height: 1.2;
  border-top: 0;
}

/* Large triangle marker - Base Style */
.chapter-marker {
  /* Display & Positioning */
  display: inline-block;
  width: 0;
  height: 0;
  flex-shrink: 0; /* Prevents marker from shrinking */

  /* Triangle Shape */
  border-top: 0.45em solid transparent;
  border-bottom: 0.45em solid transparent;
  border-left: 0.65em solid var(--vp-c-text-1);

  /* Animation */
  transition: transform 0.25s ease;
  transform-origin: center center;
}

/* Rotate marker when chapter is open */
details.chapter[open] > summary span.chapter-marker {
  transform: rotate(90deg);
}

/* Adjust H3 marker size */
details.chapter > summary > span.chapter-marker:has(+ h3) {
  font-size: 14px;
}

/* Hover color */
details.chapter summary:hover {
  color: var(--vp-c-brand-1);
}
